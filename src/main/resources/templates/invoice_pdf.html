<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8"/>
    <title>Tax Invoice</title>
    <style>
        body {
            font-family: 'Arial', sans-serif;
            font-size: 11px;
            margin: 0;
            padding: 10px;
            color: #000;
        }
        .container { border: 1px solid #000; }
        table { width: 100%; border-collapse: collapse; }
        td, th { border: 1px solid #000; padding: 5px; vertical-align: top; }

        /* Header Styles */
        .invoice-title { font-weight: bold; font-size: 14px; text-transform: uppercase; border-bottom: 1px solid #ddd; }
        .company-name { font-size: 18px; font-weight: bold; color: #6a1b9a; }
        .label { color: #555; font-weight: bold; margin-bottom: 2px; }

        /* Item Table Styles */
        .items-header { background-color: #f3e5f5; text-align: center; font-weight: bold; }
        .text-right { text-align: right; }
        .text-center { text-align: center; }

        /* Footer Styles */
        .bank-details { width: 50%; }
        .qr-section { width: 50%; }
        .total-row { background-color: #f3e5f5; font-weight: bold; }
        .terms { font-size: 10px; }
        .signature { text-align: right; padding-top: 30px; border: none; }

        .no-border { border: none !important; }
        .border-bottom-only { border: none; border-bottom: 1px solid #000; }
    </style>
</head>
<body>

<div class="container">
    <table>
        <tr>
            <td colspan="2" class="no-border">
                <span class="invoice-title">Tax Invoice</span> <span style="font-size: 10px; color: #888;">ORIGINAL FOR RECIPIENT</span>
            </td>
        </tr>
        <tr>
            <td width="50%">
                <div class="company-name">Shivam Electronics</div>
                <div>Hebbal, Bangalore - 560093, Bangalore, Karnataka, 560093</div>
                <div><strong>GSTIN:</strong> 29GGGGG1314R9Z6</div>
                <div><strong>Mobile:</strong> 9902510999</div>
            </td>
            <td width="50%">
                <table>
                    <tr>
                        <td class="no-border"><strong>Invoice No.</strong><br/><span th:text="${invoice.invoiceNumber}">30</span></td>
                        <td class="no-border"><strong>Invoice Date</strong><br/><span th:text="${#dates.format(invoice.invoiceDate, 'dd/MM/yyyy')}">15/01/2025</span></td>
                        <td class="no-border"><strong>Due Date</strong><br/>14/02/2025</td>
                    </tr>
                    <tr>
                        <td class="no-border" colspan="2"><strong>Salesman</strong><br/>Arjun S</td>
                        <td class="no-border"><strong>Challan No.</strong><br/>1234567890</td>
                    </tr>
                </table>
            </td>
        </tr>
        <tr>
            <td>
                <div class="label">BILL TO</div>
                <strong th:text="${invoice.customer.name}">AJAY SHAH</strong><br/>
                Mobile: <span th:text="${invoice.customer.phone}">9993349993</span><br/>
                Email: <span th:text="${invoice.customer.email}">ajshah@gmail.com</span>
            </td>
            <td>
                <div class="label">SHIP TO</div>
                <strong th:text="${invoice.customer.name}">AJAY SHAH</strong><br/>
                <div th:text="${invoice.customer.addresses != null and !invoice.customer.addresses.isEmpty() ? invoice.customer.addresses[0].addressLine1 : 'Address details here'}">Address details here</div>
            </td>
        </tr>
    </table>

    <table style="border-top: none;">
        <thead>
        <tr class="items-header">
            <th width="5%">S.NO.</th>
            <th width="45%">ITEMS</th>
            <th width="10%">HSN</th>
            <th width="15%">WARRANTY EXPIRY</th>
            <th width="5%">QTY.</th>
            <th width="10%">RATE</th>
            <th width="10%">AMOUNT</th>
        </tr>
        </thead>
        <tbody>
        <tr th:each="item, iter : ${invoice.items}" style="min-height: 200px;">
            <td class="text-center" th:text="${iter.index + 1}">1</td>
            <td>
                <div th:text="${item.itemName}">LG 65-inch QLED 4K Smart TV</div>
                <div style="font-size: 9px; color: #666;" th:text="'IMEI/Serial No: ' + ${item.batchNumber != null ? item.batchNumber : 'N/A'}">Serial: 12345</div>
            </td>
            <td class="text-center">85287219</td>
            <td class="text-center">10 Jan, 2026</td>
            <td class="text-center" th:text="${item.quantity}">1 PCS</td>
            <td class="text-right" th:text="${item.unitPrice}">83,813.56</td>
            <td class="text-right" th:text="${item.unitPrice * item.quantity}">83,813.56</td>
        </tr>
        <tr>
            <td colspan="4" class="no-border"></td>
            <td colspan="2" class="text-right"><strong>CGST @9%</strong></td>
            <td class="text-right" th:text="${invoice.totalTax / 2}">7,543.22</td>
        </tr>
        <tr>
            <td colspan="4" class="no-border"></td>
            <td colspan="2" class="text-right"><strong>SGST @9%</strong></td>
            <td class="text-right" th:text="${invoice.totalTax / 2}">7,543.22</td>
        </tr>
        <tr class="total-row">
            <td colspan="4" class="text-right">TOTAL</td>
            <td class="text-center">1</td>
            <td colspan="2" class="text-right" th:text="'₹ ' + ${invoice.grandTotal}">₹ 98,900</td>
        </tr>
        </tbody>
    </table>

    <table>
        <tr class="items-header">
            <th rowspan="2">HSN/SAC</th>
            <th rowspan="2">Taxable Value</th>
            <th colspan="2">CGST</th>
            <th colspan="2">SGST</th>
            <th rowspan="2">Total Tax Amount</th>
        </tr>
        <tr class="items-header">
            <th>Rate</th>
            <th>Amount</th>
            <th>Rate</th>
            <th>Amount</th>
        </tr>
        <tr>
            <td class="text-center">85287219</td>
            <td class="text-right" th:text="${invoice.subTotal}">83,813.56</td>
            <td class="text-center">9%</td>
            <td class="text-right" th:text="${invoice.totalTax / 2}">7,543.22</td>
            <td class="text-center">9%</td>
            <td class="text-right" th:text="${invoice.totalTax / 2}">7,543.22</td>
            <td class="text-right" th:text="${invoice.totalTax}">15,086.44</td>
        </tr>
    </table>

    <table>
        <tr>
            <td colspan="2">
                <strong>Total Amount (in words)</strong><br/>
                <span style="text-transform: capitalize;">Ninety Eight Thousand Nine Hundred Rupees Only</span>
            </td>
        </tr>
        <tr>
            <td width="50%">
                <div class="label">Bank Details</div>
                <strong>Name:</strong> Vinith<br/>
                <strong>IFSC Code:</strong> HDFC0000182<br/>
                <strong>Account No:</strong> 123456789157950<br/>
                <strong>Bank:</strong> HDFC Bank, MUMBAI - KANDIVALI EAST
            </td>
            <td width="50%">
                <div class="label">Payment QR Code</div>
                <div style="float: left; width: 60px; height: 60px; background: #eee; text-align: center; border: 1px solid #ccc;">
                    <br/>QR
                </div>
                <div style="margin-left: 70px;">
                    <strong>UPI ID:</strong> viniprasad1989-1@okhdfcbank<br/>
                    <img src="https://img.icons8.com/color/48/000000/google-pay.png" width="20"/>
                    <img src="https://img.icons8.com/color/48/000000/phone-pe.png" width="20"/>
                </div>
            </td>
        </tr>
        <tr>
            <td class="terms">
                <strong>Terms and Conditions</strong><br/>
                1. Goods once sold will not be taken back or exchanged.<br/>
                2. All disputes are subject to Bangalore jurisdiction only.
            </td>
            <td class="signature">
                <br/>
                <strong>Authorised Signatory For</strong><br/>
                Shivam Electronics
            </td>
        </tr>
    </table>
</div>

</body>
</html>